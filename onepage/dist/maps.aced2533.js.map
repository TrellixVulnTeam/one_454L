{"version":3,"sources":["static/js/maps.js"],"names":["map","marker","response","json","userLoc","distance","mk1","mk2","miles","roundedMiles","url","city","myLoc","lat","lng","computeDistance","latitude","longitude","google","maps","LatLng","geometry","spherical","computeDistanceBetween","Math","round","materialiseMap","Map","document","getElementById","center","zoom","disableDefaultUI","styles","elementType","stylers","color","visibility","featureType","Marker","draggable","animation","Animation","DROP","position","IpLocation","$","ajax","data","JSON","stringify","type","contentType","success","location","distanceElement","querySelector","html","alert","window","initMap","navigator","geolocation","getCurrentPosition","coords","error","code","PERMISSION_DENIED","timeout","enableHighAccuracy","maximumAge"],"mappings":"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","file":"maps.aced2533.js","sourceRoot":"..","sourcesContent":["let map;\nlet marker;\nlet response;\nlet json;\nlet userLoc;\nlet distance;\nlet mk1;\nlet mk2;\nlet miles;\nlet roundedMiles;\nlet url;\nlet city;\nconst myLoc = {\n  lat: 51.18918,\n  lng: -0.78982,\n};\n\nwindow.initMap = function () {\n  function success(position) {\n    let latitude = position.coords.latitude;\n    let longitude = position.coords.longitude;\n\n    computeDistance(latitude, longitude);\n\n    $.ajax({\n      type: \"GET\",\n      url:\n        \"https://maps.googleapis.com/maps/api/geocode/json?latlng=\" +\n        latitude +\n        \",\" +\n        longitude +\n        \"&key=AIzaSyDpzGVG-EpRG7o8cJ-39aCo8EFFj0KECLI\",\n      success: function (response) {\n        let distanceElement = document.querySelector(\"#distanceElement\");\n        $(distanceElement).html(roundedMiles);\n\n        materialiseMap(userLoc);\n      },\n    });\n  }\n\n  function error() {\n    if (error.code == error.PERMISSION_DENIED) {\n     IpLocation();\n    } else {\n      alert(\"There was an error with maps...\");\n    }\n  }\n\n  if (!navigator.geolocation) {\n    IpLocation();\n  } else {\n    let options = {\n      timeout: 20000,\n      enableHighAccuracy: true,\n      maximumAge: 0,\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n  }\n};\n\nfunction computeDistance(latitude, longitude) {\n  userLoc = {\n    lat: latitude,\n    lng: longitude,\n  };\n\n  mk1 = new google.maps.LatLng(userLoc);\n  mk2 = new google.maps.LatLng(myLoc);\n\n  distance = google.maps.geometry.spherical.computeDistanceBetween(mk1, mk2);\n\n  function getMiles(i) {\n    return i * 0.000621371192;\n  }\n\n  miles = getMiles(distance);\n  roundedMiles = Math.round(miles * 100) / 100;\n\n  return roundedMiles\n}\n\nfunction materialiseMap(userLoc) {\n  map = new google.maps.Map(document.getElementById(\"map\"), {\n    center: userLoc,\n    zoom: 6,\n    disableDefaultUI: true,\n    styles: [\n      {\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#f5f5f5\",\n          },\n        ],\n      },\n      {\n        elementType: \"labels.icon\",\n        stylers: [\n          {\n            visibility: \"off\",\n          },\n        ],\n      },\n      {\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#616161\",\n          },\n        ],\n      },\n      {\n        elementType: \"labels.text.stroke\",\n        stylers: [\n          {\n            color: \"#f5f5f5\",\n          },\n        ],\n      },\n      {\n        featureType: \"administrative.land_parcel\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#bdbdbd\",\n          },\n        ],\n      },\n      {\n        featureType: \"poi\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#eeeeee\",\n          },\n        ],\n      },\n      {\n        featureType: \"poi\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#757575\",\n          },\n        ],\n      },\n      {\n        featureType: \"poi.park\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#e5e5e5\",\n          },\n        ],\n      },\n      {\n        featureType: \"poi.park\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#9e9e9e\",\n          },\n        ],\n      },\n      {\n        featureType: \"road\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#ffffff\",\n          },\n        ],\n      },\n      {\n        featureType: \"road.arterial\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#757575\",\n          },\n        ],\n      },\n      {\n        featureType: \"road.highway\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#dadada\",\n          },\n        ],\n      },\n      {\n        featureType: \"road.highway\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#616161\",\n          },\n        ],\n      },\n      {\n        featureType: \"road.local\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#9e9e9e\",\n          },\n        ],\n      },\n      {\n        featureType: \"transit.line\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#e5e5e5\",\n          },\n        ],\n      },\n      {\n        featureType: \"transit.station\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#eeeeee\",\n          },\n        ],\n      },\n      {\n        featureType: \"water\",\n        elementType: \"geometry\",\n        stylers: [\n          {\n            color: \"#c9c9c9\",\n          },\n        ],\n      },\n      {\n        featureType: \"water\",\n        elementType: \"labels.text.fill\",\n        stylers: [\n          {\n            color: \"#9e9e9e\",\n          },\n        ],\n      },\n    ],\n  });\n  marker = new google.maps.Marker({\n    map: map,\n    draggable: false,\n    animation: google.maps.Animation.DROP,\n    position: userLoc,\n  });\n}\n\nfunction IpLocation() {\n  $.ajax({\n    url: 'https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDpzGVG-EpRG7o8cJ-39aCo8EFFj0KECLI',\n    data: JSON.stringify({ \"considerIp\": \"true\" }),\n    type: 'POST',\n    contentType: 'application/json',\n    success: function(data) {\n      if(data.location) {\n        let userLoc = new google.maps.LatLng(data.location.lat, data.location.lng);\n        materialiseMap(userLoc);\n\n        computeDistance(data.location.lat, data.location.lng);\n        let distanceElement = document.querySelector(\"#distanceElement\");\n        $(distanceElement).html(roundedMiles);\n\n      } else {\n        alert('not found');\n      }\n    }\n  });\n}\n"]}